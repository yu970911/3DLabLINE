# Phase1 テスト手順書 v1.0

目的: Phase1（当日参加導線・基本管理）の動作確認を体系的に行う。

---

## 1) 事前準備
- LINEとGASの実接続が完了している
- スプレッドシート5シート作成済み
- メッセージ管理に `docs/messages-initial.md` のCSV投入済み
- ワークショップ開催管理に「有効=TRUE」「開催日=本日以降」のWSが1件以上ある

---

## 2) シナリオテスト

### 2.1 初回友だち追加
- 手順:
  1. 公式LINEを友だち追加
- 期待結果:
  - 友だち一覧に行が追加される
  - 状態が `種別待ち`
  - 用途選択メッセージが届く

### 2.2 当日参加フロー
- 手順:
  1. 用途選択で「当日参加」を選択
  2. 氏名を送信（例: 山田 太郎）
- 期待結果:
  - 友だち一覧の区分が `参加者`
  - 状態が `通常`
  - 参加者一覧にレコード追加
  - 当日参加URLメッセージが届く

### 2.3 見込み登録フロー（事前登録）
- 手順:
  1. 用途選択で「事前登録」を選択
  2. 氏名を送信
- 期待結果:
  - 友だち一覧の区分が `見込み`
  - 状態が `通常`
  - 見込み登録完了メッセージが届く

### 2.4 見込み登録（情報のみ）
- 手順:
  1. 用途選択で「情報のみ」を選択
- 期待結果:
  - 友だち一覧の区分が `見込み`
  - 状態が `通常`
  - 見込み登録完了メッセージが届く

### 2.5 例外ケース（氏名が短い）
- 手順:
  1. 当日参加を選択
  2. 氏名に1文字を送信
- 期待結果:
  - 氏名入力の再依頼メッセージが届く

### 2.6 アンケート
- 手順:
  1. 「アンケート」を送信
- 期待結果:
  - SURVEY_URL が送信される

### 2.7 問い合わせ
- 手順:
  1. 「問い合わせ」を送信
- 期待結果:
  - スタッフ確認メッセージが送信される

---

## 3) 送信履歴の確認
- 期待結果:
  - 返信/プッシュが `送信履歴` に記録される
  - 使用メッセージID が正しく入る

---

## 4) NGテスト
- ワークショップが0件の場合:
  - 当日参加URL送信の代わりに「WS未取得エラー」メッセージが届く

---

## 5) 判定基準
- すべての期待結果が満たされればPhase1合格
