# 予約連携 設計メモ（v0.1）

目的: 外部予約システムとの連携方式を比較し、Phase3に備えた前提を整理する。

---

## 1) 連携方式の候補

### 1.1 予約完了メール解析
- 仕組み: 予約完了メールをGmail/メールAPIで取得し、本文を解析
- 長所:
  - API不要、最短で実装可能
- 短所:
  - メール仕様変更に弱い
  - 解析ミス時の補正が必要

### 1.2 Webhook / API 連携
- 仕組み: 予約システムからWebhook/APIで予約データを取得
- 長所:
  - 安定性・拡張性が高い
- 短所:
  - 外部側の設定が必要
  - 開発コスト高

### 1.3 CSV取り込み
- 仕組み: 予約データCSVを運営側でアップロード
- 長所:
  - 手動運用で始められる
  - 予約システム非依存
- 短所:
  - 運用負荷が発生
  - 即時性がない

---

## 2) 共通のデータ項目（候補）

- 予約ID
- 予約日時
- 参加予定ワークショップID
- 氏名
- メールアドレス
- 電話番号
- 予約人数
- 支払い状態
- 備考

---

## 3) システム内への取り込み先

- 参加者一覧（参加履歴）に事前参加として登録
- 友だち一覧の区分を `参加者` に更新
- リマインド送信対象に追加

---

## 4) Phase3 実装の方向性（仮）

1. CSV取り込みで運用開始
2. 予約システムAPIが確認でき次第Webhookへ移行
3. メール解析は最終手段

---

## 5) 次の確認事項
- 使用予定の予約システム名とデータ仕様
- 取得できるフィールド一覧
- Webhook/APIの有無
- CSV出力の形式
